(self.webpackChunkERP_proj=self.webpackChunkERP_proj||[]).push([[1994],{1994:(e,t,o)=>{"use strict";o.r(t),o.d(t,{StocksPageModule:()=>q});var n=o(8583),i=o(665),r=o(3083),l=o(4981),s=o(649),a=o(4762),c=o(639),d=o(54);function Z(e,t){if(1&e&&(c.TgZ(0,"ion-select-option",9),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.s9C("value",e.branchCode),c.xp6(1),c.Oqu(e.branchName)}}let u=(()=>{class e{constructor(e,t,o,n){this.apiCalls=e,this.formbuilder=t,this.modalCtrl=o,this.alertcontroller=n,this.addStocksForm=this.formbuilder.group({Amount:["",[i.kI.required,i.kI.maxLength(100)]]}),this.transferStocksForm=this.formbuilder.group({Amount:["",[i.kI.required,i.kI.maxLength(100)]],Branch:["",[i.kI.required]]}),this.deleteStocksForm=this.formbuilder.group({Amount:["",[i.kI.required,i.kI.maxLength(100)]]}),this.availabeBraches=[]}get Amount(){return this.addStocksForm.get("Amount")}get Branch(){return this.addStocksForm.get("Branch")}ngOnInit(){this.getBranches()}closeBTN(){return(0,a.mG)(this,void 0,void 0,function*(){yield this.modalCtrl.dismiss()})}getBranches(){this.apiCalls.getBranches().subscribe(e=>{e.forEach(e=>{e.branchCode!=this.apiCalls.selectedStock.branchCode&&this.availabeBraches.push(e)})},e=>{console.error("Request failed with error")})}addBTN(){this.apiCalls.presentLoading("Please wait..");var e=this.apiCalls.selectedStock.itemId,t=this.addStocksForm.get("Amount").value;this.apiCalls.addStocks(e,this.apiCalls.selectedStock.branchCode,t).subscribe(e=>{this.apiCalls.loadingController.dismiss(),this.apiCalls.presentAlert("Stocks Added",!0),this.closeBTN()},e=>{this.apiCalls.loadingController.dismiss(),this.apiCalls.presentAlert("Error occured! Try again",!0)})}transferBTN(){var e=this.apiCalls.selectedStock.branchCode,t=this.transferStocksForm.get("Branch").value,o=this.apiCalls.selectedStock.itemId,n=this.transferStocksForm.get("Amount").value;this.apiCalls.selectedStock.currentStock>n?(this.apiCalls.presentLoading("Please wait.."),this.apiCalls.transferStocks(e,t,o,n).subscribe(e=>{this.apiCalls.loadingController.dismiss(),this.apiCalls.presentAlert("Stocks Tranfered",!0),this.closeBTN()},e=>{this.apiCalls.loadingController.dismiss(),this.apiCalls.presentAlert("Error occured! Try again",!0)})):this.apiCalls.presentAlert("Invalid request",!0)}deleteBTN(){var e=this.apiCalls.selectedStock.itemId,t=-this.deleteStocksForm.get("Amount").value,o=this.apiCalls.selectedStock.branchCode;this.apiCalls.selectedStock.currentStock>=-t?(this.apiCalls.presentLoading("Please wait.."),this.apiCalls.deleteStocks(e,o,t).subscribe(e=>{this.apiCalls.loadingController.dismiss(),this.apiCalls.presentAlert("Stocks Deleted",!0),this.closeBTN()},e=>{this.apiCalls.loadingController.dismiss(),this.apiCalls.presentAlert("Error occured! Try again",!0)})):(this.apiCalls.presentAlert("Invalid Request",!0),this.closeBTN())}deleteAlert(){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.alertcontroller.create({message:"Are you sure want to delete stocks",buttons:[{text:"NO",role:"cancel"},{text:"YES",handler:()=>{this.deleteBTN()}}]});yield e.present()})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(d.ef),c.Y36(i.qu),c.Y36(r.IN),c.Y36(r.Br))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-selected-stock-modal"]],decls:60,vars:8,consts:[["color","danger","slot","end",3,"click"],["name","close"],[3,"formGroup"],["lines","full",1,"ion-no-margin"],["position","floating"],["formControlName","Amount","type","number","min","0"],["expand","block","fill","outline",3,"disabled","click"],["placeholder","Select One","formControlName","Branch"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-title"),c._uU(3),c.qZA(),c.TgZ(4,"ion-button",0),c.NdJ("click",function(){return t.closeBTN()}),c._UZ(5,"ion-icon",1),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"ion-content"),c._UZ(7,"br"),c.TgZ(8,"ion-card"),c.TgZ(9,"ion-card-header"),c.TgZ(10,"ion-card-title"),c._uU(11,"Add stocks"),c.qZA(),c.qZA(),c.TgZ(12,"ion-card-content"),c.TgZ(13,"form",2),c.TgZ(14,"ion-list",3),c.TgZ(15,"ion-item"),c.TgZ(16,"ion-label",4),c._uU(17,"Amount"),c.qZA(),c._UZ(18,"ion-input",5),c.qZA(),c.qZA(),c._UZ(19,"br"),c.TgZ(20,"ion-toolbar"),c.TgZ(21,"ion-button",6),c.NdJ("click",function(){return t.addBTN()}),c._uU(22,"Add Stocks"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(23,"br"),c.TgZ(24,"ion-card"),c.TgZ(25,"ion-card-header"),c.TgZ(26,"ion-card-title"),c._uU(27,"Transfer stocks"),c.qZA(),c.qZA(),c.TgZ(28,"ion-card-content"),c.TgZ(29,"form",2),c.TgZ(30,"ion-list",3),c.TgZ(31,"ion-item"),c.TgZ(32,"ion-label",4),c._uU(33,"Amount"),c.qZA(),c._UZ(34,"ion-input",5),c.qZA(),c.TgZ(35,"ion-item"),c.TgZ(36,"ion-label"),c._uU(37,"Transfer To"),c.qZA(),c.TgZ(38,"ion-select",7),c.YNc(39,Z,2,2,"ion-select-option",8),c.qZA(),c.qZA(),c.qZA(),c._UZ(40,"br"),c.TgZ(41,"ion-toolbar"),c.TgZ(42,"ion-button",6),c.NdJ("click",function(){return t.transferBTN()}),c._uU(43,"Transfer Stocks"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(44,"br"),c.TgZ(45,"ion-card"),c.TgZ(46,"ion-card-header"),c.TgZ(47,"ion-card-title"),c._uU(48,"Delete stocks"),c.qZA(),c.qZA(),c.TgZ(49,"ion-card-content"),c.TgZ(50,"form",2),c.TgZ(51,"ion-list",3),c.TgZ(52,"ion-item"),c.TgZ(53,"ion-label",4),c._uU(54,"Amount"),c.qZA(),c._UZ(55,"ion-input",5),c.qZA(),c.qZA(),c._UZ(56,"br"),c.TgZ(57,"ion-toolbar"),c.TgZ(58,"ion-button",6),c.NdJ("click",function(){return t.deleteAlert()}),c._uU(59,"Delete Stocks"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Oqu(t.apiCalls.selectedStock.name),c.xp6(10),c.Q6J("formGroup",t.addStocksForm),c.xp6(8),c.Q6J("disabled",!t.addStocksForm.valid),c.xp6(8),c.Q6J("formGroup",t.transferStocksForm),c.xp6(10),c.Q6J("ngForOf",t.availabeBraches),c.xp6(3),c.Q6J("disabled",!t.transferStocksForm.valid),c.xp6(8),c.Q6J("formGroup",t.deleteStocksForm),c.xp6(8),c.Q6J("disabled",!t.deleteStocksForm.valid))},directives:[r.Gu,r.sr,r.wd,r.YG,r.gu,r.W2,r.PM,r.Zi,r.gZ,r.FN,i._Y,i.JL,i.sg,r.q_,r.Ie,r.Q$,r.pK,r.as,i.JJ,i.u,r.t9,r.QI,n.sg,r.n0],styles:[""]}),e})();function g(e,t){if(1&e&&(c.TgZ(0,"ion-select-option",8),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.s9C("value",e.branchCode),c.xp6(1),c.Oqu(e.branchName)}}function h(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"ion-card",9),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw().selectStock(t)}),c.TgZ(1,"ion-row"),c.TgZ(2,"ion-col",10),c.TgZ(3,"div",11),c._uU(4),c.qZA(),c.qZA(),c.TgZ(5,"ion-col",10),c.TgZ(6,"div",11),c._uU(7),c.qZA(),c.qZA(),c.TgZ(8,"ion-col",10),c.TgZ(9,"div",11),c._uU(10),c.qZA(),c.qZA(),c.TgZ(11,"ion-col",10),c.TgZ(12,"div",11),c._uU(13),c.qZA(),c.qZA(),c.TgZ(14,"ion-col",10),c.TgZ(15,"div",11),c._uU(16),c.qZA(),c.qZA(),c.TgZ(17,"ion-col",10),c.TgZ(18,"div",11),c._uU(19),c.qZA(),c.qZA(),c.TgZ(20,"ion-col",10),c.TgZ(21,"div",11),c._uU(22),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit,o=c.oxw();c.Q6J("ngClass",0==e.currentStock?"notavailable":"available"),c.xp6(4),c.Oqu(e.name),c.xp6(3),c.Oqu(e.brandName),c.xp6(3),c.Oqu(e.currentStock),c.xp6(3),c.Oqu(e.cost),c.xp6(3),c.Oqu(e.price),c.xp6(3),c.Oqu(e.disValue),c.xp6(3),c.Oqu(o.calculateStockVal(e.currentStock,e.cost))}}const p=[{path:"",component:(()=>{class e{constructor(e,t,o,n){this.apicalls=e,this.modalCtrl=t,this.router=o,this.location=n,this.returnedItems=[],this.availabeBraches=[]}ngOnInit(){this.apicalls.requirePane=!0,this.getAllStocks(),this.getAllBranches(),this.apicalls.encodeURL()}getAllStocks(){this.apicalls.getStocks().subscribe(e=>{this.returnedItems=e},e=>{console.error("Request failed with error")})}getAllBranches(){this.apicalls.getBranches().subscribe(e=>{this.availabeBraches=e},e=>{console.error("Request failed with error")})}selectedStockEvent(){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.modalCtrl.create({component:u});yield e.present()})}selectStock(e){this.apicalls.selectedStock=e,this.selectedStockEvent()}calculateStockVal(e,t){return e*t}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(d.ef),c.Y36(r.IN),c.Y36(s.F0),c.Y36(n.Ye))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-stocks"]],decls:51,vars:8,consts:[[3,"translucent"],["slot","start"],["size","8"],["placeholder","Search...","animated","true","showCancelButton","focus",3,"ngModel","ngModelChange"],["placeholder","Select One",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[2,"text-align","center"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"value"],[3,"ngClass","click"],[1,"long-text"],[1,"perElement"]],template:function(e,t){1&e&&(c.TgZ(0,"ion-header",0),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",1),c._UZ(3,"ion-menu-button"),c.qZA(),c.TgZ(4,"ion-title"),c._uU(5,"Stocks"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"ion-content"),c.TgZ(7,"ion-grid"),c.TgZ(8,"ion-row"),c.TgZ(9,"ion-col",2),c.TgZ(10,"ion-toolbar"),c.TgZ(11,"ion-searchbar",3),c.NdJ("ngModelChange",function(e){return t.filterTerm=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"ion-col"),c.TgZ(13,"ion-item"),c.TgZ(14,"ion-label"),c._uU(15,"Branch"),c.qZA(),c.TgZ(16,"ion-select",4),c.NdJ("ngModelChange",function(e){return t.filterTerm=e}),c.YNc(17,g,2,2,"ion-select-option",5),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(18,"br"),c.TgZ(19,"ion-grid"),c.TgZ(20,"ion-row"),c.TgZ(21,"ion-col"),c.TgZ(22,"ion-card",6),c.TgZ(23,"h5"),c._uU(24,"Item Name"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"ion-col"),c.TgZ(26,"ion-card",6),c.TgZ(27,"h5"),c._uU(28,"Brand"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(29,"ion-col"),c.TgZ(30,"ion-card",6),c.TgZ(31,"h5"),c._uU(32,"Stock Amount"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(33,"ion-col"),c.TgZ(34,"ion-card",6),c.TgZ(35,"h5"),c._uU(36,"Cost"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(37,"ion-col"),c.TgZ(38,"ion-card",6),c.TgZ(39,"h5"),c._uU(40,"Price"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(41,"ion-col"),c.TgZ(42,"ion-card",6),c.TgZ(43,"h5"),c._uU(44,"Discount"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(45,"ion-col"),c.TgZ(46,"ion-card",6),c.TgZ(47,"h5"),c._uU(48,"Stock value"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(49,h,23,8,"ion-card",7),c.ALo(50,"filter"),c.qZA(),c.qZA()),2&e&&(c.Q6J("translucent",!0),c.xp6(11),c.Q6J("ngModel",t.filterTerm),c.xp6(5),c.Q6J("ngModel",t.filterTerm),c.xp6(1),c.Q6J("ngForOf",t.availabeBraches),c.xp6(32),c.Q6J("ngForOf",c.xi3(50,5,t.returnedItems,t.filterTerm)))},directives:[r.Gu,r.sr,r.Sm,r.fG,r.wd,r.W2,r.jY,r.Nd,r.wI,r.VI,r.j9,i.JJ,i.On,r.Ie,r.Q$,r.t9,r.QI,n.sg,r.PM,r.n0,n.mk],pipes:[l.Z],styles:["ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.long-text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-align:center}.perElement[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px;color:#fff}.available[_ngcontent-%COMP%]{background-color:#006403}.notavailable[_ngcontent-%COMP%]{background-color:#b92c20}"]}),e})()}];let A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[s.Bz.forChild(p)],s.Bz]}),e})(),T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.ez,r.Pc,i.u5,i.UX]]}),e})(),q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.ez,i.u5,r.Pc,A,l.h,T]]}),e})()}}]);