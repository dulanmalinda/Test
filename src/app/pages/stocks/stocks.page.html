<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Stocks</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>  

  <ion-grid>
    <ion-row>
      <ion-col size="8">
        <ion-toolbar>
          <ion-searchbar placeholder="Search..." [(ngModel)]="filterTerm" animated="true" showCancelButton= "focus" ></ion-searchbar>
        </ion-toolbar>
      </ion-col>
      <ion-col>
        <ion-item>
          <ion-label>Branch</ion-label>
          <ion-select placeholder="Select One" [(ngModel)]="filterTerm">
            <ion-select-option value="{{branch.branchCode}}" *ngFor="let branch of availabeBraches">{{branch.branchName}}</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>
    </ion-row>
  </ion-grid>


  <br>
  
  <ion-grid>
    
    <!--Titles-->
    <ion-row>
      <ion-col>
        <ion-card style="text-align:center;"><h5>Item Name</h5></ion-card>
      </ion-col>
      <ion-col>
        <ion-card style="text-align:center;"><h5>Brand</h5></ion-card>
      </ion-col>
      <ion-col>
        <ion-card style="text-align:center;"><h5>Stock Amount</h5></ion-card>
      </ion-col>
      <ion-col>
        <ion-card style="text-align:center;"><h5>Cost</h5></ion-card>
      </ion-col>
      <ion-col>
        <ion-card style="text-align:center;"><h5>Price</h5></ion-card>       
      </ion-col>
      <ion-col>
        <ion-card style="text-align:center;"><h5>Discount</h5></ion-card>       
      </ion-col>
      <ion-col>
        <ion-card style="text-align:center;"><h5>Stock value</h5></ion-card>       
      </ion-col>
    </ion-row>
    <!--End titles-->

    
    <ion-card *ngFor="let item of returnedItems | filter:filterTerm;let i = index;"  [ngClass]="(item.currentStock == 0) ? 'notavailable' : 'available'" (click)="selectStock(item)">
      <ion-row  >
        <ion-col class="long-text">
          <div class="perElement">{{item.name}}</div>
        </ion-col>
        <ion-col class="long-text">
          <div class="perElement">{{item.brandName}}</div>
        </ion-col>
        <ion-col class="long-text">
          <div class="perElement">{{item.currentStock}}</div>
        </ion-col>
        <ion-col class="long-text">
          <div class="perElement">{{item.cost}}</div>
        </ion-col>
        <ion-col class="long-text">
          <div class="perElement">{{item.price}}</div>
        </ion-col>
        <ion-col class="long-text">
          <div class="perElement">{{item.disValue}}</div>
        </ion-col>
        <ion-col class="long-text">
          <div class="perElement">{{calculateStockVal(item.currentStock,item.cost)}}</div>
        </ion-col>
      </ion-row>
    </ion-card>

  </ion-grid>
  

</ion-content>